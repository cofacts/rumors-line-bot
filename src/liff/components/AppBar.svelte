<script>
  import { t } from 'ttag';
  import { VIEW_ARTICLE_PREFIX, getArticleURL } from 'src/lib/sharedUtils';
  import NewWindowIcon from './icons/NewWindowIcon.svelte';

  export let articleId;

  const articleUrl = getArticleURL(articleId);
  const openLink = liff.isInClient() ?
    `https://line.me/R/oaMessage/@cofacts?${encodeURIComponents(`${VIEW_ARTICLE_PREFIX}${articleUrl}`)}` :
    getArticleURL(articleId);
</script>

<style>
  header {
    display: flex;
    align-items: center;
    height: 56px;
    padding: 0 16px;
    background: #fff;
    border-bottom: 2px solid var(--secondary50);
    position: sticky;
    top: 0;
    z-index: 1;
  }

  .logo {
    margin-right: auto;
  }

  a {
    color: var(--secondary300);
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 0.25px;
    text-decoration: none;
    display: flex;
    align-items: center;
  }

  a > :global(svg) {
    margin-left: 8px;
  }
</style>

<header>
  <svg class="logo" width="99" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 3.5c6 0 10.6 4.7 10.6 10.5S20 24.5 14.1 24.5C8.2 24.5 3.5 19.8 3.5 14S8.2 3.5 14.1 3.5zM14 0A14 14 0 001.2 19.5a14 14 0 0013 8.5A14 14 0 0027 8.6 14 14 0 0014 0z" fill="#333"/><path d="M29.7 22.3H24v-3.5h9.2c0 2-1.5 3.5-3.5 3.5z" fill="#333"/><path d="M14 10.5c2 0 3.6 1.6 3.6 3.5a3.5 3.5 0 01-7 0c0-2 1.5-3.5 3.5-3.5zM14 7a7 7 0 00-7 7 7 7 0 0014.1 0 7 7 0 00-7-7z" fill="#FFB600"/><path d="M31.6 15.7h-12v-3.5h15.5c0 2-1.6 3.5-3.5 3.5z" fill="#FFB600"/><path d="M53.4 10.6H41a.5.5 0 01-.5-.5c0-.3.2-.6.5-.6h12.4c.3 0 .5.3.5.6s-.2.5-.5.5zM52.6 1.9H41.8a.5.5 0 01-.5-.6c0-.3.2-.5.5-.5h10.8c.3 0 .6.2.6.5s-.3.6-.6.6z" fill="#333"/><path d="M51.5 2.6H43a1 1 0 00-1 .9v6.2h2.3V9h6v.7h2.2V3.5c0-.5-.4-1-.9-1zm-1.3 5.3h-6v-.7h6v.7zm0-1.8h-6v-.7h6v.7zm-6-1.8v-.7h6v.7h-6zM44 10.5a8 8 0 01-2.6 2c-.2 0 0 .4.3.5a5 5 0 003.8-1.1c.6-.5-1.3-1.6-1.5-1.4z" fill="#333"/><path d="M46.7.5l-1 2.2h2l.8-1.4c.3-.6-.1-1.3-.8-1.3h-.1a1 1 0 00-.9.5zM51.4 13.2c-.7-.2-1.4-1.1-3-1.8-.4-.3 0-.6.3-.6 1.2-.1 3.5.4 4.1 1 .4.6-.1 1.8-1.4 1.4zM57.9.6l-.8 2 2-.1.5-1.1a1 1 0 00-.8-1.4 1 1 0 00-1 .6z" fill="#333"/><path d="M60.9 2.3h-4.3c-.4 0-.7.3-.7.7v9c0 .3.3.6.7.6h4.3c.4 0 .7-.3.7-.7V3c0-.3-.3-.6-.7-.6zm-1.5 9H58V8h1.4v3.5zM58 6.7v-3h1.4v3H58zM63.4 2.8V3c0 .3.3.6.6.6h2.2c.3 7.6-.5 8.3-.8 8.3l-1.6-.1c-.4 0-.7.4-.5.7l.2.2 2.8.4c.9 0 1.7 0 1.8-1 .3-1.4.6-4.5.4-9.3 0-.3-.2-.5-.5-.5h-4c-.3 0-.6.2-.6.5z" fill="#333"/><path d="M64.2 0a1 1 0 00-1 .9 36 36 0 01-1.5 4.3c-.1.5.7.7 1 .4 1-1 1.8-2.7 2.4-4a1 1 0 00-.9-1.5zM64 9c-.4-.4-.4-1.7-1-2.8-.2-.3 0-.4.3-.3 1 .5 2.3 1.8 2.4 2.6 0 .5-1 1.4-1.7.5zM87.8.6l-.8 2 2-.1.6-1.1a1 1 0 00-.8-1.4h-.1a1 1 0 00-.9.6z" fill="#333"/><path d="M90.9 2.3h-4.4c-.3 0-.7.3-.7.7v9c0 .3.4.6.7.6H91c.3 0 .7-.3.7-.7V3c0-.3-.4-.6-.7-.6zm-1.5 9H88V8h1.4v3.5zM88 6.7v-3h1.4v3H88zM93.4 2.8V3c0 .3.3.6.5.6h2.3c.2 7.6-.6 8.3-.8 8.3l-1.6-.1c-.4 0-.7.4-.5.7l.1.2 2.9.4c.8 0 1.6 0 1.8-1 .3-1.4.5-4.5.4-9.3 0-.3-.3-.5-.5-.5h-4c-.3 0-.6.2-.6.5z" fill="#333"/><path d="M94.2 0a1 1 0 00-1 .9 36 36 0 01-1.5 4.3c-.2.5.6.7 1 .4 1-1 1.7-2.7 2.4-4a1 1 0 00-1-1.5zM94 9c-.4-.4-.4-1.7-1-2.8-.2-.3 0-.4.3-.3 1 .5 2.3 1.8 2.3 2.6.1.5-1 1.4-1.7.5zM73 0a1 1 0 00-1 .8l-1.5 5.4c-.2.4.5.8.9.3.9-1 2-2.9 2.5-5 .2-.7-.2-1.5-1-1.5z" fill="#333"/><path d="M72.6 13a.9.9 0 01-.9-.8V2.4h1.8v9.8c0 .5-.4.9-.9.9zM78.5.5H75c-.4 0-.7.3-.7.7v11c0 .5.4.9.9.9s.8-.4.8-.9V5.5h2.5c.4 0 .7-.3.7-.7V1.2c0-.4-.3-.7-.7-.7zm-1 3.7H76V1.7h1.5v2.5zM79.7 1.1c0 .4.3.6.6.6H82v2.5h-1.6c-.3 0-.6.3-.6.7 0 .3.3.6.6.6h2.9c.3 0 .6-.3.6-.6V1c0-.3-.3-.6-.6-.6h-2.9c-.3 0-.6.3-.6.6z" fill="#333"/><path d="M78.3 7.9h-4V6.6h4c.4 0 .7.3.7.7 0 .3-.3.6-.7.6zM78.3 10.4h-4V9h4c.4 0 .7.3.7.6 0 .4-.3.7-.7.7zM83.7 11.3c-1.8-.8-3-2-3.8-3.4 0 0-.4-.1-.3.1.1 2 1.4 4.9 3.6 5.2 1 0 2-1.2.5-1.9z" fill="#333"/><path d="M83.2 6.1h-3c-.4 0-.6.3-.6.7 0 .3.2.6.6.6h1.5c-.1 1.8-.6 4-3.6 5-.4.2-.2.7.2.7 4-.7 5.3-3 5.5-5.7v-.6c0-.4-.2-.7-.6-.7zM51.3 23.6l-.8-.2c-.2 0-1 0-1.1 1a2.8 2.8 0 01-3 2.2c-1.9-.2-2.6-2.2-2.6-4 0-1.7.3-2.8 1-3.6.9-.8 1.8-.8 2-.8 1.6 0 2 1.1 2.3 1.8l.2.4c.4.8 1 .8 1.2.8.3 0 .5 0 .7-.2.2-.2.3-.5.3-.7 0-.5-.2-1-.6-1.4-.3-.5-.9-1-1.6-1.3-.7-.3-1.6-.5-2.5-.5-.8 0-1.5.2-2.2.4-.6.2-1.2.6-1.7 1-.5.5-1 1-1.2 1.7-.2.7-.4 1.5-.4 2.3a6.2 6.2 0 00.7 2.7l.7 1.1a4.5 4.5 0 002.5 1.3l1.7.2c.8 0 1.5-.1 2-.3.7-.3 1.2-.6 1.5-1l.9-1 .3-1.2c0-.2-.1-.5-.3-.7zM60 21a4 4 0 00-1.4-.8c-.5-.2-1.1-.3-1.8-.3-.6 0-1.2.1-1.7.3-.6.2-1 .5-1.4.8l-.8 1.3c-.2.5-.3 1-.3 1.6 0 .5 0 1 .3 1.6.1.4.4.9.8 1.2.4.4.9.6 1.4.8a5.3 5.3 0 003.5 0c.5-.2 1-.4 1.3-.8.4-.3.7-.8 1-1.2l.2-1.6c0-.6 0-1.1-.3-1.6L60 21zM58.9 24c0 .9-.2 1.5-.6 2-.4.5-.9.8-1.5.8-.4 0-.7-.1-1-.4-.3-.2-.6-.5-.7-1-.2-.4-.3-.9-.3-1.4 0-.6.1-1.1.3-1.5.1-.5.4-.8.7-1 .3-.2.6-.3 1-.3.6 0 1.1.2 1.5.7.4.5.6 1.2.6 2zM65.4 18.3h.3v.1c.3.2.6.4 1.1.3.5 0 .8-.5.8-.7 0-.6-.8-.9-2-.9-.8 0-1.4.1-1.8.3-.4.1-.7.4-.9.8l-.2 1.4v.6h-.8c-.4 0-.8.3-.8.7 0 .3.4.6.8.6h.8v5c0 .5.1.8.3 1 .2.2.5.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.5.3-1v-5h1c.4 0 .7-.3.7-.6 0-.4-.3-.7-.7-.7h-1v-.5c0-.4 0-1 .2-1.3l.3-.1zM74.8 25v-1-1c0-.8-.1-1.4-.3-1.8a2 2 0 00-1.2-1c-.5-.2-1.3-.3-2.2-.3-.8 0-1.5.1-2.1.3a3 3 0 00-1.3.8c-.2.4-.4.7-.4 1 0 .4.2.8.7 1 .3 0 .6 0 .9-.2.3-.2.3-.5.4-.7 0-.6.4-.7.6-.9l1.2-.2c.5 0 1.1.1 1.4.4.2.3.3.6.2 1-.3.2-.6.2-1 .3h-.3a54.4 54.4 0 01-2.3.5 3 3 0 00-1.6.8c-.4.4-.6 1-.6 1.6 0 .4.2.8.4 1.1.2.3.5.6 1 .8.4.2.9.3 1.4.3.6 0 1.2 0 1.7-.3l1.4-.7.6.7.7.3c.3 0 .5 0 .8-.2l.3-.6-.2-.8-.2-1.1zm-2.1-1.3c0 .3 0 1.4-.5 2-.1.2-.8.8-1.8.8-.4 0-.7-.1-1-.4a1 1 0 01-.3-.7c0-.3.1-.6.3-.7l.7-.4a30.9 30.9 0 012.6-.6zM83.4 24.5c-.5 0-1 .2-1.2.7v.1c-.1.5-.3 1.4-1.8 1.4-1.6 0-2-1.8-2-2.8 0-1 .2-2.8 2-2.8 1.2 0 1.5.7 1.6 1.1l.2.4c.3.4.6.5.8.5.3 0 .6 0 .8-.2.2-.2.3-.4.3-.7 0-.2-.1-.5-.3-.7-.1-.3-.4-.6-.7-.8l-1.2-.5a5 5 0 00-1.5-.3 5 5 0 00-2.3.5c-.7.4-1.2.8-1.5 1.4-.4.6-.5 1.4-.5 2.1 0 1.2.3 2.1 1 2.8.8.7 1.9 1 3.2 1l1.7-.1a4 4 0 001.2-.6l.7-.8.3-.8c0-.2 0-.8-.8-.9zM89.8 26c-.3 0-.4.2-.6.4-.1.1-.2.3-.6.3-.3 0-.5-.6-.5-1.7v-3.5h1c.4 0 .7-.3.7-.6 0-.4-.3-.7-.7-.7h-1V19v-.8l-.3-.4c-.2-.2-.5-.3-.8-.3l-.5.1a1 1 0 00-.6.8V20.2h-.5c-.4 0-.7.3-.7.7 0 .3.3.6.7.6h.5v3.7c0 .6 0 1 .2 1.4 0 .4.3.7.7.9.3.2.8.3 1.5.3s1.2 0 1.6-.3c.4-.1.6-.4.6-.7 0-.2-.1-.7-.7-.7zM98 24.3l-1-.8-1.7-.5a31 31 0 01-2-.6c-.2 0-.2-.2-.2-.4s0-1 1.2-1c1.1 0 1.3.5 1.4.8.2.7.9 1 1.4.8.6-.1.7-.6.7-.8 0-.3 0-.5-.2-.7l-.7-.6-1-.4-1.6-.2c-.7 0-1.3.1-1.8.3-.5.3-.9.5-1.1.9-.3.3-.4.7-.4 1.1 0 .4.1.8.4 1.1.3.3.7.6 1.1.7l1.8.6c.6.1 1.1.2 1.4.4.2.1.4.4.4.7 0 .5-.6 1-1.4 1-1 0-1.6-.4-2-1.2-.1-.5-.6-.7-1.2-.6-.5.1-.6.5-.6.8 0 .3.1.6.4 1 .2.3.7.6 1.2.8.6.2 1.2.3 2 .3s1.5-.1 2-.3c.6-.2 1-.5 1.3-.9.3-.4.5-.8.5-1.4 0-.3-.2-.6-.4-1z" fill="#333"/></svg>
  {#if articleId }
    <a href={openLink}>
      {t`Open in Cofacts`}
      <NewWindowIcon />
    </a>
  {/if}
</header>