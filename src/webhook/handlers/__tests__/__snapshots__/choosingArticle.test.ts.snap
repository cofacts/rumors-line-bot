// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`should ask users if they want to submit article when user say not found 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "foo",
        "text": "ÈÄô‰∏ÄÁØáÊñáÁ´†Á¢∫ÂØ¶ÊòØ‰∏ÄÂÄãËΩâÂÇ≥ÊñáÁ´†Ôºå‰ªñÂ§†Èï∑ÔºåÁúãËµ∑‰æÜÂæàËΩâÂÇ≥Ôºå‰ΩÜÊòØ‰ΩøÁî®ËÄÖË¶∫ÂæóË≥áÊñôÂ∫´Ë£°Ê≤íÊúâ„ÄÇ",
        "type": "text",
      },
    ],
    "sessionId": 0,
  },
  "replies": Array [
    Object {
      "altText": "I am sorry you cannot find the information ‚ÄúÈÄô‰∏ÄÁØáÊñáÁ´†Á¢∫ÂØ¶ÊòØ‰∏ÄÂÄã‚ãØ‚ãØ‚Äù you are looking for. But I would still like to help.
May I ask you a quick question?",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "I am sorry you cannot find the information ‚ÄúÈÄô‰∏ÄÁØáÊñáÁ´†Á¢∫ÂØ¶ÊòØ‰∏ÄÂÄã‚ãØ‚ãØ‚Äù you are looking for. But I would still like to help.
May I ask you a quick question?",
              "type": "text",
              "wrap": true,
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "type": "bubble",
      },
      "type": "flex",
    },
    Object {
      "altText": "Did you forward this message as a whole to me from the LINE app?",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "Did you forward this message as a whole to me from the LINE app?",
              "type": "text",
              "wrap": true,
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "footer": Object {
          "contents": Array [
            Object {
              "action": Object {
                "data": "{\\"input\\":\\"__POSTBACK_YES__\\",\\"sessionId\\":0,\\"state\\":\\"ASKING_ARTICLE_SOURCE\\"}",
                "displayText": "Yes, I forwarded it as a whole",
                "label": "Yes, I forwarded it as a whole",
                "type": "postback",
              },
              "color": "#333333",
              "style": "primary",
              "type": "button",
            },
            Object {
              "action": Object {
                "data": "{\\"input\\":\\"__POSTBACK_NO__\\",\\"sessionId\\":0,\\"state\\":\\"ASKING_ARTICLE_SOURCE\\"}",
                "displayText": "No, typed it myself",
                "label": "No, typed it myself",
                "type": "postback",
              },
              "color": "#333333",
              "style": "primary",
              "type": "button",
            },
          ],
          "layout": "vertical",
          "spacing": "sm",
          "type": "box",
        },
        "styles": Object {
          "body": Object {
            "separator": true,
          },
        },
        "type": "bubble",
      },
      "type": "flex",
    },
  ],
}
`;

exports[`should ask users if they want to submit image article when user say not found 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "6530038889933",
        "type": "image",
      },
    ],
    "sessionId": 0,
  },
  "replies": Array [
    Object {
      "altText": "I am sorry you cannot find the information you are looking for.
Do you want someone to fact-check this message?",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "I am sorry you cannot find the information you are looking for.
Do you want someone to fact-check this message?",
              "type": "text",
              "wrap": true,
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "type": "bubble",
      },
      "type": "flex",
    },
    Object {
      "altText": "Be the first to report the message",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "We currently don‚Äôt have this message in our database.",
              "type": "text",
              "wrap": true,
            },
            Object {
              "text": "If you believe:",
              "type": "text",
              "wrap": true,
            },
            Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "margin": "none",
                  "text": "ü§î",
                  "type": "text",
                },
                Object {
                  "contents": Array [
                    Object {
                      "text": "That it is most likely ",
                      "type": "span",
                    },
                    Object {
                      "color": "#ffb600",
                      "decoration": "none",
                      "text": "a rumor,",
                      "type": "span",
                      "weight": "bold",
                    },
                  ],
                  "flex": 1,
                  "margin": "md",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "margin": "md",
              "type": "box",
            },
            Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "margin": "none",
                  "text": "üåê",
                  "type": "text",
                },
                Object {
                  "contents": Array [
                    Object {
                      "text": "And you are willing to ",
                      "type": "span",
                    },
                    Object {
                      "color": "#ffb600",
                      "decoration": "none",
                      "text": "make this message public",
                      "type": "span",
                      "weight": "bold",
                    },
                  ],
                  "flex": 1,
                  "margin": "md",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "margin": "md",
              "type": "box",
            },
            Object {
              "contents": Array [
                Object {
                  "color": "#ffb600",
                  "text": "Press ‚ÄúüÜï Report to database‚Äù to make this message public on Cofacts website ",
                  "type": "span",
                  "weight": "bold",
                },
                Object {
                  "text": "and have volunteers fact-check it. This way you can help the people who receive the same message in the future.",
                  "type": "span",
                },
              ],
              "type": "text",
              "wrap": true,
            },
          ],
          "layout": "vertical",
          "paddingAll": "lg",
          "spacing": "md",
          "type": "box",
        },
        "footer": Object {
          "contents": Array [
            Object {
              "action": Object {
                "data": "{\\"input\\":[0],\\"sessionId\\":0,\\"state\\":\\"ASKING_ARTICLE_SUBMISSION_CONSENT\\"}",
                "displayText": "üÜï Report to database",
                "label": "üÜï Report to database",
                "type": "postback",
              },
              "color": "#ffb600",
              "style": "primary",
              "type": "button",
            },
            Object {
              "action": Object {
                "data": "{\\"input\\":[],\\"sessionId\\":0,\\"state\\":\\"ASKING_ARTICLE_SUBMISSION_CONSENT\\"}",
                "displayText": "Don‚Äôt report",
                "label": "Don‚Äôt report",
                "type": "postback",
              },
              "color": "#333333",
              "style": "primary",
              "type": "button",
            },
          ],
          "layout": "vertical",
          "spacing": "sm",
          "type": "box",
        },
        "styles": Object {
          "body": Object {
            "separator": true,
          },
        },
        "type": "bubble",
      },
      "type": "flex",
    },
  ],
}
`;

exports[`should create a UserArticleLink when selecting a article 1`] = `
Array [
  Object {
    "_id": "_id",
    "articleId": "article-id",
    "createdAt": 2020-01-01T00:00:00.000Z,
    "lastViewedAt": 2020-01-01T00:00:00.000Z,
    "userId": "user-id-0",
  },
]
`;

exports[`should select article and choose the only one reply for user 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "foo",
        "text": "Just One Reply Just One Reply Just One Reply Just One Reply Just One Reply",
        "type": "text",
      },
    ],
    "sessionId": 0,
  },
  "replies": Array [
    Object {
      "text": "üí° Someone on the internet replies to the message first reported on Jan 2, 2018:",
      "type": "text",
    },
    Object {
      "text": "The Only Reply The Only Reply The Only Reply The Only Reply The Only Reply The Only Reply The Only Reply The Only Reply The Only Reply ",
      "type": "text",
    },
    Object {
      "text": "ÙÄÇÖ ‚ö†Ô∏èÔ∏è This reply has no references and it may be biased ‚ö†Ô∏èÔ∏è  ÙÄÇÖ",
      "type": "text",
    },
    Object {
      "text": "‚¨ÜÔ∏è Therefore, the author think the message contains misinformation.

üíÅ This content is provided by Cofact message reporting chatbot and crowd-sourced fact-checking community under CC BY-SA 4.0 license. Please refer to their references and make judgements on your own.


‚ÅâÔ∏è If you have different thoughts, you may have your say here:
https://dev.cofacts.tw/article/article-id",
      "type": "text",
    },
    Object {
      "altText": "Is the reply helpful?",
      "contents": Object {
        "contents": Array [
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "text": "Is the reply helpful?",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "vertical",
              "paddingAll": "xl",
              "type": "box",
            },
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "label": "üëç Yes",
                    "type": "uri",
                    "uri": "https://liff.line.me/1563196602-X6mLdDkW?p=feedback&articleId=article-id&replyId=AV--O3nfyCdS-nWhujMD&vote=UPVOTE",
                  },
                  "color": "#00B172",
                  "style": "primary",
                  "type": "button",
                },
                Object {
                  "action": Object {
                    "label": "üòï No",
                    "type": "uri",
                    "uri": "https://liff.line.me/1563196602-X6mLdDkW?p=feedback&articleId=article-id&replyId=AV--O3nfyCdS-nWhujMD&vote=DOWNVOTE",
                  },
                  "color": "#FB5959",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "spacing": "sm",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "text": "Don't forget to forward the messages above to others and share with them!",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "vertical",
              "paddingAll": "lg",
              "spacing": "md",
              "type": "box",
            },
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "label": "Share to friends",
                    "type": "uri",
                    "uri": "https://line.me/R/msg/text/?Someone%20says%20the%20message%20%E2%80%9CJust%20One%20Repl%E2%8B%AF%E2%8B%AF%E2%80%9D%20contains%20misinformation.%0A%0APlease%20refer%20to%20https://dev.cofacts.tw/article/article-id%20for%20more%20information,%20replies%20and%20references.",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
                Object {
                  "action": Object {
                    "label": "Provide better reply",
                    "type": "uri",
                    "uri": "https://dev.cofacts.tw/article/article-id",
                  },
                  "color": "#ffb600",
                  "style": "link",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "spacing": "sm",
              "type": "box",
            },
            "type": "bubble",
          },
        ],
        "type": "carousel",
      },
      "type": "flex",
    },
  ],
}
`;

exports[`should select article and have OPINIONATED and NOT_ARTICLE replies 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "foo",
        "text": "ËÄÅÊ¶ÆÊ∞ë‰πùÊàêÂ≠òÊ¨æÂÖ®ÈÉ®ÊçêÁµ¶ÊÖàÊøüÔºåÂ¶Ç‰ªäÁ™Æ‰∫ÜÂçªÂæó‰∏çÂà∞ÊÖàÊøüÈÜ´Èô¢Á§æÂ∑•ÁöÑÂπ´ÂøôÔºåÁ´üÁøªËáâ‰∏çË™ç‰∫∫",
        "type": "text",
      },
    ],
    "sessionId": 1497994017447,
  },
  "replies": Array [
    Object {
      "text": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶  Volunteer editors have published several replies to this message.

1 of them say it ‚ùå contains misinformation.
1 of them says it üí¨ contains personal perspective.
2 of them says it ‚ö†Ô∏èÔ∏è is out of scope of Cofacts.",
      "type": "text",
    },
    Object {
      "text": "Let's pick one üëá",
      "type": "text",
    },
    Object {
      "altText": "Please take a look at the following replies.",
      "contents": Object {
        "contents": Array [
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ËÄÅÊ¶ÆÊ∞ëÊúâ‰ΩèÊâÄÔºåÊúâÊúàÈÄÄ‰ø∏Ôºå‰πü‰∏çÈúÄË¶ÅÁâπÂà•ÁöÑÈÜ´ÁôÇË≠∑ÁêÜÔºåÂõ†Ê≠§ËºÉÈÅ©ÂêàÊ¶ÆÊ∞ë‰πãÂÆ∂È§äËÄÅÔºåÊÖàÊøü‰πü‰∏ÄÁõ¥ÈóúÊá∑Èô™‰º¥„ÄÇË≠∑ÁêÜ‰πãÂÆ∂ÊúâÂÖçË≤ªÊñπÊ°àÔºåÂÖ•‰ΩèË≥áÊ†ºÂíåÊúâÁÑ°ÊçêÊ¨æÊ≤íÊúâÈóú‰øÇ„ÄÇ
ÊÖàÂñÑÊ©üÊßã‰ΩøÁî®Ë≥áÊ∫êÈúÄÁ¨¶ÂêàË¶èÂÆöÔºå‰∏çËÉΩÂÉÖÁÇ∫Â∞ëÊï∏‰∫∫ÈñãÁâπ‰æã„ÄÇ‰∏çÊòØÊõæÊçêÊ¨æÂ∞±ÈúÄË¶ÅÁâπÂà•ÂéöÂæÖÔºå‰∏çÊòØÊú™ÊõæÊçêÊ¨æÂ∞±ÂèØ‰ª•‰∏çÁêÜ„ÄÇ",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "üëç 3 users consider this helpful",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":1497994017447,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúËÄÅÊ¶ÆÊ∞ëÊúâ‰ΩèÊâÄÔºåÊúâÊúàÈÄÄ‰ø∏Ôºå‰πü‰∏çÈúÄË¶ÅÁâπÂà•ÁöÑÈÜ´ÁôÇË≠∑ÁêÜ‚ãØ‚ãØ‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÊÖàÊøüËá™‰æÜÊúâË§íÊúâË≤∂ÔºåÊØè‰∫∫ÊúâÂêÑËá™ÁöÑÁúãÊ≥ï„ÄÇ",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV8fXikZyCdS-nWhuhfN\\"},\\"sessionId\\":1497994017447,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÊÖàÊøüËá™‰æÜÊúâË§íÊúâË≤∂ÔºåÊØè‰∫∫ÊúâÂêÑËá™ÁöÑÁúãÊ≥ï„ÄÇ‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains personal perspective",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "Êï¥ÂÄãÂü∫Áù£ÊïôÂæíÁöÑÊâìÊâãÔºåËá™Â∑±‰∏çÂä™ÂäõÂéªÁâß‰∫∫„ÄÅÂãüÊ¨æÔºåÂà©Áî®ÊîªÊìäÂà•‰∫∫Ôºå‰∏âÂàÜÁúü‰∏ÉÂàÜÂÅáÔºåÊõ¥Âà©Áî®Â§öÂ∏≥Ëôü‰æÜÈÄ†Âã¢ÂèäÈÄ†È¢®ÂêëÔºåÂÆ≥Êàë‰πüÂ∑ÆÈªûÁõ∏‰ø°‰∫ÜÔºåÂêÑ‰ΩçÊúâÊô∫ÊÖßÁöÑÁúãÂÆòÔºåÁúãÈÅé‰πãÂæåÔºåÁ¨ë‰∏ÄÁ¨ëÂç≥ÂèØÔºåÂà•Â§™Ë™çÁúüÂéªÁõ∏‰ø°‰ªñÁöÑË©±Âï¶„ÄÇ
",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--LRZYyCdS-nWhujL9\\"},\\"sessionId\\":1497994017447,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÊï¥ÂÄãÂü∫Áù£ÊïôÂæíÁöÑÊâìÊâãÔºåËá™Â∑±‰∏çÂä™ÂäõÂéªÁâß‰∫∫„ÄÅÂãüÊ¨æÔºåÂà©‚ãØ‚ãØ‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it invalid request",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÊñáÁ´†ÊòØÂÅáÁöÑ ÁÖßÁâá‰πüÊòØÁõúÁî®ÊàëÊñπÂÆ∂‰∫∫ÁöÑÁÖßÁâá,Âö¥ÈáçÂΩ±ÈüøÊàëÂÆ∂‰∫∫ÂêçË≠Ω,ÊàëÊñπÂ∑≤Â∞çpoÊñáÁöÑ‰∫∫ËÅØÁµ°‰∏¶ÊâìÁÆóÊèêÂá∫ÂëäË®¥,Ë´ãÂãøÁõ∏‰ø°Ë¨†Ë®Ä.",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV8jkRlByCdS-nWhuhiY\\"},\\"sessionId\\":1497994017447,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÊñáÁ´†ÊòØÂÅáÁöÑ ÁÖßÁâá‰πüÊòØÁõúÁî®ÊàëÊñπÂÆ∂‰∫∫ÁöÑÁÖßÁâá,Âö¥ÈáçÂΩ±‚ãØ‚ãØ‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it invalid request",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
        ],
        "type": "carousel",
      },
      "type": "flex",
    },
  ],
}
`;

exports[`should select article and slice replies when over 10 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "foo",
        "text": "ËÄÅÊ¶ÆÊ∞ë‰πùÊàêÂ≠òÊ¨æÂÖ®ÈÉ®ÊçêÁµ¶ÊÖàÊøüÔºåÂ¶Ç‰ªäÁ™Æ‰∫ÜÂçªÂæó‰∏çÂà∞ÊÖàÊøüÈÜ´Èô¢Á§æÂ∑•ÁöÑÂπ´ÂøôÔºåÁ´üÁøªËáâ‰∏çË™ç‰∫∫",
        "type": "text",
      },
    ],
    "sessionId": 0,
  },
  "replies": Array [
    Object {
      "text": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶  Volunteer editors have published several replies to this message.

6 of them say it ‚ùå contains misinformation.
2 of them says it ‚≠ï contains true information.
1 of them says it üí¨ contains personal perspective.
2 of them says it ‚ö†Ô∏èÔ∏è is out of scope of Cofacts.",
      "type": "text",
    },
    Object {
      "text": "Let's pick one üëá",
      "type": "text",
    },
    Object {
      "altText": "Please take a look at the following replies.",
      "contents": Object {
        "contents": Array [
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ1",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ1‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ2",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ2‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ3",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ3‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains true information",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ4",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ4‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains true information",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ5",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ5‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ6",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ6‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ9",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV8fXikZyCdS-nWhuhfN\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ9‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains personal perspective",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ10",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ10‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ11",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--O3nfyCdS-nWhujMD\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ11‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÂõûÊáâ7„ÄÇ
",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "No feedback yet",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AV--LRZYyCdS-nWhujL9\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÂõûÊáâ7„ÄÇ
‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it invalid request",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
        ],
        "type": "carousel",
      },
      "type": "flex",
    },
    Object {
      "text": "Visit https://dev.cofacts.tw/article/article-id for more replies.",
      "type": "text",
    },
  ],
}
`;

exports[`should select article by articleId 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "foo",
        "text": "„ÄäÁ∑äÊÄ•ÈÄöÁü•„Äã
Âè∞ÂåóÈ¶¨ÂÅïÈÜ´Èô¢ÂÇ≥‰æÜË®äÊÅØÔºö
Ë≥áÊ∑±ÈÜ´ÁîüÔºàÊûóÊ∏ÖÈ¢®ÔºâÂÇ≥‰æÜÔºö„ÄåË´ãÂ§ßÂÆ∂‰ª•ÂæåÂçÉËê¨‰∏çË¶ÅÂÜçÂêÉÁîüÈ≠öÁâá‰∫ÜÔºÅ„Äç
Âõ†ÁÇ∫ÊúÄËøëÂ∑≤Á∂ìÁôºÁèæ- Â•ΩÂ§öÁóÖ‰∫∫Âõ†ÁÇ∫ÂêÉ‰∫ÜÁîüÈ≠öÁâáÔºåËÉÉÂ£ÅÈôÑËëó„ÄäÊµ∑Áç∏ËÉÉËÖ∫Ëü≤„ÄãÔºåÂ§ßÂ∞èÈöª‰∏ç‰∏ÄÂÆöÔºåÊúâÁöÑÁóÖ‰∫∫ÁîöËá≥ËÉÉÂ£Å‰∏äÊªøÊªøÈÉΩÊòØÁÑ°Ê≥ïÂ§æÂá∫‰æÜÔºåÈ©ÖËü≤Ëó•‰πüÂæàÈõ£Ê†πÊ≤ªÔºåÁΩπÊÇ£Ê©üÁéáÊØèÂÄãÂúãÂÆ∂ÁöÑ‰∫∫ÈÉΩ‰∏ÄÊ®£„ÄÇ
Â∞§ÂÖ∂ÔºõÈÆ≠È≠öÁöÑÂê´Ëü≤ÈáèÊúÄÈ´ò„ÄÅÊúÄÂèØÊÄïÔºÅ
Ë´ãÂÇ≥Áµ¶ÊúãÂèãÔºåËÆì‰ªñÂÄëÊúâÊâÄË≠¶ÊÉï!",
        "type": "text",
      },
    ],
    "sessionId": 0,
  },
  "replies": Array [
    Object {
      "text": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶  Volunteer editors have published several replies to this message.

2 of them say it ‚ùå contains misinformation.",
      "type": "text",
    },
    Object {
      "text": "Let's pick one üëá",
      "type": "text",
    },
    Object {
      "altText": "Please take a look at the following replies.",
      "contents": Object {
        "contents": Array [
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "Êü•Ë≠âÈÄôÂâáË¨†Ë®ÄÁöÑÈÅéÁ®ã‰∏≠ÔºåÁ¥ÑÁø∞Ëµ∞Èπø‰πüÁôºÁèæÂÖ∂ÂØ¶Á∂≤Ë∑ØÊó©Â∞±ÊúâË®±Â§öËß£Á≠îÔºåÂ∞±ËÆìÁ¥ÑÁø∞Ëµ∞Èπø‰æÜÂÄüËä±Áçª‰Ωõ‰∏Ä‰∏ãÂõâ„ÄÇÂ§öÂÆ∂Â™íÈ´îÈÉΩÊúâÈáùÂ∞çÈÄôÂâá„ÄåÂêÉÁîüÈ≠öÁâáÊúÉÊúâÊµ∑Áç∏ËÉÉËÖ∫Ëü≤ÈôÑËëóËÉÉÂ£Å„ÄçÁöÑË¨†Ë®ÄË´ãÊïôÈÜ´Â∏´ÔºåÂèóË®™ÁöÑÈÜ´Â∏´ÂÄëÁöÜË°®Á§∫ÔºåÈÄôÂâáË¨†Ë®ÄÂ§™Ë™áÂ§ßÔºåÊµ∑Áç∏ËÉÉËÖ∫Ëü≤Ê≤íÈÇ£È∫ºÁ•ûÈÄöÂª£Â§ß„ÄÇ
ÈÜ´Â∏´ÂÄëË°®Á§∫ÔºåÂè∞ÁÅ£ÁöÑË°õÁîüÊ¢ù‰ª∂ÂæàÈÄ≤Ê≠•ÔºåÂêÉÁîüÈ≠öÁâáË¢´ÂØÑÁîüËü≤ÂØÑÁîüÁöÑÊ°à‰æãÂæàÂ∞ëÔºåÂ§ßÈÉ®‰ªΩÈÉΩÊòØÁîüÈ≠öÁâá‰∏ç‰πæÊ∑®ÔºåÊÑüÊüìÊ≤ôÈñÄÊ∞èËèå„ÄÅÂ§ßËÖ∏Ê°øËèåÁöÑÊ°à‰æãÔºåÊ≠§Â§ñÔºåÂØÑÁîüËü≤‰πü‰∏çÊòØ‰ªÄÈ∫ºÈõ£Ê≤ª‰πãÁóáÔºåÊúçÁî®‰∏Ä‰∫õÊäóÂØÑÁîüËü≤Ëó•Â∞±ÂèØ‰ª•ÊÆ∫Ê≠ªËÉÉË£°ÁöÑÈÄô‰∫õËü≤Â≠êÔºåÈô§ÈùûÈÄô‰∫õËü≤Â≠êË∑ëÂà∞Ë∫´È´îÂÖ∂‰ªñÈÉ®‰ΩçÈÇ£ÊâçÊØîËºÉÈõ£ËôïÁêÜÔºå‰ΩÜÈÇ£‰πüÊòØË¶ÅÂ§ßÈáèÂú∞ÂêÉÁîüÈ≠öÁâáÔºà‰∏ÄÈÄ±ÂÖ©Ê¨°‰ª•‰∏äÔºâÔºå‰∏≠ÁçéÊ©üÁéáÊâçÊúÉÊØîËºÉÈ´ò„ÄÇ",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "üëç 14 users consider this helpful
üòï 2 users consider this not useful",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AVygFA0RyCdS-nWhuaXY\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÊü•Ë≠âÈÄôÂâáË¨†Ë®ÄÁöÑÈÅéÁ®ã‰∏≠ÔºåÁ¥ÑÁø∞Ëµ∞Èπø‰πüÁôºÁèæÂÖ∂ÂØ¶Á∂≤Ë∑ØÊó©‚ãØ‚ãØ‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "align": "start",
                  "margin": "md",
                  "maxLines": 10,
                  "text": "ÈÅéÂéªÂè∞ÁÅ£Âè™Êúâ‰∏ÄÂÄãÊµ∑Áç∏ËÉÉËÖ∫Ëü≤ÈëΩÂÖ•ËÉÉÂ£ÅÁöÑÁóÖ‰æãÔºåËÄå‰∏îÂÉÖÊúâ‰∏ÄÈöªËü≤„ÄÇËÄåÁ∂ìÊü•Ë©¢ÔºåÂè∞ÂåóÈ¶¨ÂÅïÈÜ´Èô¢‰πüÊ≤íÊúâÂêçÁÇ∫ÊûóÊ∏ÖÈ¢®ÁöÑÈÜ´Â∏´„ÄÇ",
                  "type": "text",
                  "wrap": true,
                },
                Object {
                  "type": "filler",
                },
                Object {
                  "margin": "md",
                  "type": "separator",
                },
                Object {
                  "contents": Array [
                    Object {
                      "size": "xs",
                      "text": "üëç 24 users consider this helpful",
                      "type": "text",
                      "wrap": true,
                    },
                  ],
                  "layout": "horizontal",
                  "margin": "md",
                  "spacing": "none",
                  "type": "box",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "direction": "ltr",
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "data": "{\\"input\\":{\\"a\\":\\"article-id\\",\\"r\\":\\"AVy6LkWIyCdS-nWhuaqu\\"},\\"sessionId\\":0,\\"state\\":\\"CHOOSING_REPLY\\"}",
                    "displayText": "I choose ‚ÄúÈÅéÂéªÂè∞ÁÅ£Âè™Êúâ‰∏ÄÂÄãÊµ∑Áç∏ËÉÉËÖ∫Ëü≤ÈëΩÂÖ•ËÉÉÂ£ÅÁöÑÁóÖ‰æãÔºåËÄå‰∏î‚ãØ‚ãØ‚Äù",
                    "label": "üëÄ Take a look",
                    "type": "postback",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "flex": 0,
                  "text": "üí¨",
                  "type": "text",
                },
                Object {
                  "color": "#AAAAAA",
                  "gravity": "center",
                  "size": "sm",
                  "text": "Someone thinks it contains misinformation",
                  "type": "text",
                  "weight": "bold",
                  "wrap": true,
                },
              ],
              "layout": "horizontal",
              "paddingBottom": "none",
              "spacing": "md",
              "type": "box",
            },
            "type": "bubble",
          },
        ],
        "type": "carousel",
      },
      "type": "flex",
    },
  ],
}
`;

exports[`should select article with no replies: has AI reply 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "foo",
        "text": "ËÄÅÂè∏Ê©üËªäË£°Á∏ΩÂÇô‰∏ÄÂ°äÈ¶ôÁöÇÔºåÁü•ÈÅìÂÖßÊÉÖÁöÑÊñ∞ÊâãÈªòÈªò‰πüÊ∫ñÂÇô‰∫Ü‰∏ÄÂ°ä",
        "type": "text",
      },
    ],
    "sessionId": 0,
  },
  "replies": Array [
    Object {
      "altText": "This message has already published on Cofacts, and will soon be fact-checked by volunteers.
Don‚Äôt trust the message just yet!",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "This message has already published on Cofacts, and will soon be fact-checked by volunteers.
Don‚Äôt trust the message just yet!",
              "type": "text",
              "wrap": true,
            },
            Object {
              "action": Object {
                "label": "View reported message",
                "type": "uri",
                "uri": "https://dev.cofacts.tw/article/article-id",
              },
              "margin": "md",
              "type": "button",
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "type": "bubble",
      },
      "type": "flex",
    },
    Object {
      "altText": "ÈÄôÂâáË®äÊÅØÈ¶ñÊ¨°ÂõûÂ†±Êñº Jan 2, 2018 ÔºåÂ∞öÂæÖÊü•Ê†∏ÔºåË´ãÂÖà‰∏çË¶ÅÁõ∏‰ø°ÈÄôÁØáÊñáÁ´†„ÄÇ
‰ª•‰∏ãÊòØÁï∂ÊôÇÊ©üÂô®‰∫∫ÂàùÊ≠•ÂàÜÊûêÊ≠§Ë®äÊÅØÁöÑÁµêÊûúÔºåÂ∏åÊúõËÉΩÂ∏∂Áµ¶‰Ω†‰∏Ä‰∫õÊÉ≥Ê≥ï„ÄÇ",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "ÈÄôÂâáË®äÊÅØÈ¶ñÊ¨°ÂõûÂ†±Êñº Jan 2, 2018 ÔºåÂ∞öÂæÖÊü•Ê†∏ÔºåË´ãÂÖà‰∏çË¶ÅÁõ∏‰ø°ÈÄôÁØáÊñáÁ´†„ÄÇ
‰ª•‰∏ãÊòØÁï∂ÊôÇÊ©üÂô®‰∫∫ÂàùÊ≠•ÂàÜÊûêÊ≠§Ë®äÊÅØÁöÑÁµêÊûúÔºåÂ∏åÊúõËÉΩÂ∏∂Áµ¶‰Ω†‰∏Ä‰∫õÊÉ≥Ê≥ï„ÄÇ",
              "type": "text",
              "wrap": true,
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "type": "bubble",
      },
      "type": "flex",
    },
    Object {
      "createdAt": "2018-01-09T05:52:12.658Z",
      "sender": Object {
        "iconUrl": "/static/img/aireply.png?cachebust=20230405",
        "name": "AI Ëá™ÂãïÂàÜÊûê",
      },
      "text": "Hello from ChatGPT",
      "type": "text",
    },
    Object {
      "altText": "After reading the automatic analysis by the bot above, you can:",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "After reading the automatic analysis by the bot above, you can:",
              "type": "text",
              "wrap": true,
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "type": "bubble",
      },
      "type": "flex",
    },
    Object {
      "altText": "Provide more detail",
      "contents": Object {
        "contents": Array [
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "text": "Is the AI analysis helpful?",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "vertical",
              "paddingAll": "xl",
              "type": "box",
            },
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "label": "üëç Yes",
                    "type": "uri",
                    "uri": "https://liff.line.me/1563196602-X6mLdDkW?p=aiReplyFeedback&aiResponseId=undefined&vote=UPVOTE",
                  },
                  "color": "#00B172",
                  "style": "primary",
                  "type": "button",
                },
                Object {
                  "action": Object {
                    "label": "üòï No",
                    "type": "uri",
                    "uri": "https://liff.line.me/1563196602-X6mLdDkW?p=aiReplyFeedback&aiResponseId=undefined&vote=DOWNVOTE",
                  },
                  "color": "#FB5959",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "spacing": "sm",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "color": "#00B172",
                  "size": "lg",
                  "text": "Provide feedback to AI analysis",
                  "type": "text",
                },
              ],
              "layout": "vertical",
              "paddingBottom": "none",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "text": "It would help fact checkers a lot if you provide more detail :)",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "label": "Provide detail",
                    "type": "uri",
                    "uri": "https://liff.line.me/1563196602-X6mLdDkW?p=comment&articleId=article-id",
                  },
                  "color": "#00B172",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "spacing": "sm",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "color": "#00B172",
                  "size": "lg",
                  "text": "Provide more detail",
                  "type": "text",
                },
              ],
              "layout": "vertical",
              "paddingBottom": "none",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "text": "We all get by with a little help from our friends üåü Share your question to friends, someone might be able to help!",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "label": "Share on LINE",
                    "type": "uri",
                    "uri": "line://msg/text/?Please%20help%20me%20verify%20if%20this%20is%20true%3A%20https%3A%2F%2Fdev.cofacts.tw%2Farticle%2Farticle-id",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
                Object {
                  "action": Object {
                    "label": "Share on Facebook",
                    "type": "uri",
                    "uri": "https://www.facebook.com/dialog/share?openExternalBrowser=1&app_id=719656818195367&display=popup&hashtag=%23ReportedToCofacts&href=https%3A%2F%2Fdev.cofacts.tw%2Farticle%2Farticle-id",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "spacing": "sm",
              "type": "box",
            },
            "type": "bubble",
          },
        ],
        "type": "carousel",
      },
      "type": "flex",
    },
  ],
}
`;

exports[`should select article with no replies: has no AI reply 1`] = `
Object {
  "context": Object {
    "msgs": Array [
      Object {
        "id": "foo",
        "text": "ËÄÅÂè∏Ê©üËªäË£°Á∏ΩÂÇô‰∏ÄÂ°äÈ¶ôÁöÇÔºåÁü•ÈÅìÂÖßÊÉÖÁöÑÊñ∞ÊâãÈªòÈªò‰πüÊ∫ñÂÇô‰∫Ü‰∏ÄÂ°ä",
        "type": "text",
      },
    ],
    "sessionId": 0,
  },
  "replies": Array [
    Object {
      "altText": "This message has already published on Cofacts, and will soon be fact-checked by volunteers.
Don‚Äôt trust the message just yet!",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "This message has already published on Cofacts, and will soon be fact-checked by volunteers.
Don‚Äôt trust the message just yet!",
              "type": "text",
              "wrap": true,
            },
            Object {
              "action": Object {
                "label": "View reported message",
                "type": "uri",
                "uri": "https://dev.cofacts.tw/article/article-id",
              },
              "margin": "md",
              "type": "button",
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "type": "bubble",
      },
      "type": "flex",
    },
    Object {
      "altText": "In the meantime, you can:",
      "contents": Object {
        "body": Object {
          "contents": Array [
            Object {
              "text": "In the meantime, you can:",
              "type": "text",
              "wrap": true,
            },
          ],
          "layout": "vertical",
          "type": "box",
        },
        "type": "bubble",
      },
      "type": "flex",
    },
    Object {
      "altText": "Provide more detail",
      "contents": Object {
        "contents": Array [
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "text": "It would help fact checkers a lot if you provide more detail :)",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "label": "Provide detail",
                    "type": "uri",
                    "uri": "https://liff.line.me/1563196602-X6mLdDkW?p=comment&articleId=article-id",
                  },
                  "color": "#00B172",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "spacing": "sm",
              "type": "box",
            },
            "header": Object {
              "contents": Array [
                Object {
                  "color": "#00B172",
                  "size": "lg",
                  "text": "Provide more detail",
                  "type": "text",
                },
              ],
              "layout": "vertical",
              "paddingBottom": "none",
              "type": "box",
            },
            "type": "bubble",
          },
          Object {
            "body": Object {
              "contents": Array [
                Object {
                  "text": "We all get by with a little help from our friends üåü Share your question to friends, someone might be able to help!",
                  "type": "text",
                  "wrap": true,
                },
              ],
              "layout": "vertical",
              "type": "box",
            },
            "footer": Object {
              "contents": Array [
                Object {
                  "action": Object {
                    "label": "Share on LINE",
                    "type": "uri",
                    "uri": "line://msg/text/?Please%20help%20me%20verify%20if%20this%20is%20true%3A%20https%3A%2F%2Fdev.cofacts.tw%2Farticle%2Farticle-id",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
                Object {
                  "action": Object {
                    "label": "Share on Facebook",
                    "type": "uri",
                    "uri": "https://www.facebook.com/dialog/share?openExternalBrowser=1&app_id=719656818195367&display=popup&hashtag=%23ReportedToCofacts&href=https%3A%2F%2Fdev.cofacts.tw%2Farticle%2Farticle-id",
                  },
                  "color": "#ffb600",
                  "style": "primary",
                  "type": "button",
                },
              ],
              "layout": "vertical",
              "spacing": "sm",
              "type": "box",
            },
            "type": "bubble",
          },
        ],
        "type": "carousel",
      },
      "type": "flex",
    },
  ],
}
`;
